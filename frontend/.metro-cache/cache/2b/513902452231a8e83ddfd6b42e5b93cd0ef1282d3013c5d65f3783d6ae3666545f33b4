{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const EXPO_PUBLIC_BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${EXPO_PUBLIC_BACKEND_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async (username, password, name, email, role) => {\n      try {\n        const response = await axios.default.post(`${EXPO_PUBLIC_BACKEND_URL}/api/auth/register`, {\n          username,\n          password,\n          name,\n          email,\n          role\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('token');\n      await AsyncStorage.default.removeItem('user');\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":114,"map":[[13,2,26,0,"exports"],[13,9,26,0],[13,10,26,0,"AuthProvider"],[13,22,26,0],[13,25,26,0,"AuthProvider"],[13,37,26,0],[14,2,106,0,"exports"],[14,9,106,0],[14,10,106,0,"useAuth"],[14,17,106,0],[14,20,106,0,"useAuth"],[14,27,106,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,5,0],[21,8,5,6,"EXPO_PUBLIC_BACKEND_URL"],[21,31,5,29],[21,34,5,32,"process"],[21,41,5,39],[21,42,5,40,"env"],[21,45,5,43],[21,46,5,44,"EXPO_PUBLIC_BACKEND_URL"],[21,69,5,67],[22,2,24,0],[22,8,24,6,"AuthContext"],[22,19,24,17],[22,35,24,20],[22,39,24,20,"createContext"],[22,45,24,33],[22,46,24,33,"createContext"],[22,59,24,33],[22,61,24,63,"undefined"],[22,70,24,72],[22,71,24,73],[23,2,26,7],[23,11,26,16,"AuthProvider"],[23,23,26,28,"AuthProvider"],[23,24,26,29],[24,4,26,31,"children"],[25,2,26,71],[25,3,26,72],[25,5,26,74],[26,4,27,2],[26,10,27,8],[26,11,27,9,"user"],[26,15,27,13],[26,17,27,15,"setUser"],[26,24,27,22],[26,25,27,23],[26,28,27,26],[26,32,27,26,"useState"],[26,38,27,34],[26,39,27,34,"useState"],[26,47,27,34],[26,49,27,48],[26,53,27,52],[26,54,27,53],[27,4,28,2],[27,10,28,8],[27,11,28,9,"token"],[27,16,28,14],[27,18,28,16,"setToken"],[27,26,28,24],[27,27,28,25],[27,30,28,28],[27,34,28,28,"useState"],[27,40,28,36],[27,41,28,36,"useState"],[27,49,28,36],[27,51,28,52],[27,55,28,56],[27,56,28,57],[28,4,29,2],[28,10,29,8],[28,11,29,9,"isLoading"],[28,20,29,18],[28,22,29,20,"setIsLoading"],[28,34,29,32],[28,35,29,33],[28,38,29,36],[28,42,29,36,"useState"],[28,48,29,44],[28,49,29,44,"useState"],[28,57,29,44],[28,59,29,45],[28,63,29,49],[28,64,29,50],[29,4,31,2],[29,8,31,2,"useEffect"],[29,14,31,11],[29,15,31,11,"useEffect"],[29,24,31,11],[29,26,31,12],[29,32,31,18],[30,6,32,4,"loadStoredAuth"],[30,20,32,18],[30,21,32,19],[30,22,32,20],[31,4,33,2],[31,5,33,3],[31,7,33,5],[31,9,33,7],[31,10,33,8],[32,4,35,2],[32,10,35,8,"loadStoredAuth"],[32,24,35,22],[32,27,35,25],[32,33,35,25,"loadStoredAuth"],[32,34,35,25],[32,39,35,37],[33,6,36,4],[33,10,36,8],[34,8,37,6],[34,14,37,12,"storedToken"],[34,25,37,23],[34,28,37,26],[34,34,37,32,"AsyncStorage"],[34,46,37,44],[34,47,37,44,"default"],[34,54,37,44],[34,55,37,45,"getItem"],[34,62,37,52],[34,63,37,53],[34,70,37,60],[34,71,37,61],[35,8,38,6],[35,14,38,12,"storedUser"],[35,24,38,22],[35,27,38,25],[35,33,38,31,"AsyncStorage"],[35,45,38,43],[35,46,38,43,"default"],[35,53,38,43],[35,54,38,44,"getItem"],[35,61,38,51],[35,62,38,52],[35,68,38,58],[35,69,38,59],[36,8,40,6],[36,12,40,10,"storedToken"],[36,23,40,21],[36,27,40,25,"storedUser"],[36,37,40,35],[36,39,40,37],[37,10,41,8,"setToken"],[37,18,41,16],[37,19,41,17,"storedToken"],[37,30,41,28],[37,31,41,29],[38,10,42,8,"setUser"],[38,17,42,15],[38,18,42,16,"JSON"],[38,22,42,20],[38,23,42,21,"parse"],[38,28,42,26],[38,29,42,27,"storedUser"],[38,39,42,37],[38,40,42,38],[38,41,42,39],[39,8,43,6],[40,6,44,4],[40,7,44,5],[40,8,44,6],[40,15,44,13,"error"],[40,20,44,18],[40,22,44,20],[41,8,45,6,"console"],[41,15,45,13],[41,16,45,14,"error"],[41,21,45,19],[41,22,45,20],[41,43,45,41],[41,45,45,43,"error"],[41,50,45,48],[41,51,45,49],[42,6,46,4],[42,7,46,5],[42,16,46,14],[43,8,47,6,"setIsLoading"],[43,20,47,18],[43,21,47,19],[43,26,47,24],[43,27,47,25],[44,6,48,4],[45,4,49,2],[45,5,49,3],[46,4,51,2],[46,10,51,8,"login"],[46,15,51,13],[46,18,51,16],[46,24,51,16,"login"],[46,25,51,23,"username"],[46,33,51,39],[46,35,51,41,"password"],[46,43,51,57],[46,48,51,62],[47,6,52,4],[47,10,52,8],[48,8,53,6],[48,14,53,12,"response"],[48,22,53,20],[48,25,53,23],[48,31,53,29,"axios"],[48,36,53,34],[48,37,53,34,"default"],[48,44,53,34],[48,45,53,35,"post"],[48,49,53,39],[48,50,53,40],[48,53,53,43,"EXPO_PUBLIC_BACKEND_URL"],[48,76,53,66],[48,93,53,83],[48,95,53,85],[49,10,54,8,"username"],[49,18,54,16],[50,10,55,8,"password"],[51,8,56,6],[51,9,56,7],[51,10,56,8],[52,8,58,6],[52,14,58,12],[53,10,58,14,"access_token"],[53,22,58,26],[54,10,58,28,"user"],[54,14,58,32],[54,16,58,34,"userData"],[55,8,58,43],[55,9,58,44],[55,12,58,47,"response"],[55,20,58,55],[55,21,58,56,"data"],[55,25,58,60],[56,8,60,6],[56,14,60,12,"AsyncStorage"],[56,26,60,24],[56,27,60,24,"default"],[56,34,60,24],[56,35,60,25,"setItem"],[56,42,60,32],[56,43,60,33],[56,50,60,40],[56,52,60,42,"access_token"],[56,64,60,54],[56,65,60,55],[57,8,61,6],[57,14,61,12,"AsyncStorage"],[57,26,61,24],[57,27,61,24,"default"],[57,34,61,24],[57,35,61,25,"setItem"],[57,42,61,32],[57,43,61,33],[57,49,61,39],[57,51,61,41,"JSON"],[57,55,61,45],[57,56,61,46,"stringify"],[57,65,61,55],[57,66,61,56,"userData"],[57,74,61,64],[57,75,61,65],[57,76,61,66],[58,8,63,6,"setToken"],[58,16,63,14],[58,17,63,15,"access_token"],[58,29,63,27],[58,30,63,28],[59,8,64,6,"setUser"],[59,15,64,13],[59,16,64,14,"userData"],[59,24,64,22],[59,25,64,23],[60,6,65,4],[60,7,65,5],[60,8,65,6],[60,15,65,13,"error"],[60,20,65,23],[60,22,65,25],[61,8,66,6],[61,14,66,12],[61,18,66,16,"Error"],[61,23,66,21],[61,24,66,22,"error"],[61,29,66,27],[61,30,66,28,"response"],[61,38,66,36],[61,40,66,38,"data"],[61,44,66,42],[61,46,66,44,"detail"],[61,52,66,50],[61,56,66,54],[61,70,66,68],[61,71,66,69],[62,6,67,4],[63,4,68,2],[63,5,68,3],[64,4,70,2],[64,10,70,8,"register"],[64,18,70,16],[64,21,70,19],[64,27,70,19,"register"],[64,28,70,26,"username"],[64,36,70,42],[64,38,70,44,"password"],[64,46,70,60],[64,48,70,62,"name"],[64,52,70,74],[64,54,70,76,"email"],[64,59,70,89],[64,61,70,91,"role"],[64,65,70,103],[64,70,70,108],[65,6,71,4],[65,10,71,8],[66,8,72,6],[66,14,72,12,"response"],[66,22,72,20],[66,25,72,23],[66,31,72,29,"axios"],[66,36,72,34],[66,37,72,34,"default"],[66,44,72,34],[66,45,72,35,"post"],[66,49,72,39],[66,50,72,40],[66,53,72,43,"EXPO_PUBLIC_BACKEND_URL"],[66,76,72,66],[66,96,72,86],[66,98,72,88],[67,10,73,8,"username"],[67,18,73,16],[68,10,74,8,"password"],[68,18,74,16],[69,10,75,8,"name"],[69,14,75,12],[70,10,76,8,"email"],[70,15,76,13],[71,10,77,8,"role"],[72,8,78,6],[72,9,78,7],[72,10,78,8],[73,8,80,6],[73,14,80,12],[74,10,80,14,"access_token"],[74,22,80,26],[75,10,80,28,"user"],[75,14,80,32],[75,16,80,34,"userData"],[76,8,80,43],[76,9,80,44],[76,12,80,47,"response"],[76,20,80,55],[76,21,80,56,"data"],[76,25,80,60],[77,8,82,6],[77,14,82,12,"AsyncStorage"],[77,26,82,24],[77,27,82,24,"default"],[77,34,82,24],[77,35,82,25,"setItem"],[77,42,82,32],[77,43,82,33],[77,50,82,40],[77,52,82,42,"access_token"],[77,64,82,54],[77,65,82,55],[78,8,83,6],[78,14,83,12,"AsyncStorage"],[78,26,83,24],[78,27,83,24,"default"],[78,34,83,24],[78,35,83,25,"setItem"],[78,42,83,32],[78,43,83,33],[78,49,83,39],[78,51,83,41,"JSON"],[78,55,83,45],[78,56,83,46,"stringify"],[78,65,83,55],[78,66,83,56,"userData"],[78,74,83,64],[78,75,83,65],[78,76,83,66],[79,8,85,6,"setToken"],[79,16,85,14],[79,17,85,15,"access_token"],[79,29,85,27],[79,30,85,28],[80,8,86,6,"setUser"],[80,15,86,13],[80,16,86,14,"userData"],[80,24,86,22],[80,25,86,23],[81,6,87,4],[81,7,87,5],[81,8,87,6],[81,15,87,13,"error"],[81,20,87,23],[81,22,87,25],[82,8,88,6],[82,14,88,12],[82,18,88,16,"Error"],[82,23,88,21],[82,24,88,22,"error"],[82,29,88,27],[82,30,88,28,"response"],[82,38,88,36],[82,40,88,38,"data"],[82,44,88,42],[82,46,88,44,"detail"],[82,52,88,50],[82,56,88,54],[82,77,88,75],[82,78,88,76],[83,6,89,4],[84,4,90,2],[84,5,90,3],[85,4,92,2],[85,10,92,8,"logout"],[85,16,92,14],[85,19,92,17],[85,25,92,17,"logout"],[85,26,92,17],[85,31,92,29],[86,6,93,4],[86,12,93,10,"AsyncStorage"],[86,24,93,22],[86,25,93,22,"default"],[86,32,93,22],[86,33,93,23,"removeItem"],[86,43,93,33],[86,44,93,34],[86,51,93,41],[86,52,93,42],[87,6,94,4],[87,12,94,10,"AsyncStorage"],[87,24,94,22],[87,25,94,22,"default"],[87,32,94,22],[87,33,94,23,"removeItem"],[87,43,94,33],[87,44,94,34],[87,50,94,40],[87,51,94,41],[88,6,95,4,"setToken"],[88,14,95,12],[88,15,95,13],[88,19,95,17],[88,20,95,18],[89,6,96,4,"setUser"],[89,13,96,11],[89,14,96,12],[89,18,96,16],[89,19,96,17],[90,4,97,2],[90,5,97,3],[91,4,99,2],[91,24,100,4],[91,28,100,4,"_reactJsxDevRuntime"],[91,47,100,4],[91,48,100,4,"jsxDEV"],[91,54,100,4],[91,56,100,5,"AuthContext"],[91,67,100,16],[91,68,100,17,"Provider"],[91,76,100,25],[92,6,100,26,"value"],[92,11,100,31],[92,13,100,33],[93,8,100,35,"user"],[93,12,100,39],[94,8,100,41,"token"],[94,13,100,46],[95,8,100,48,"login"],[95,13,100,53],[96,8,100,55,"register"],[96,16,100,63],[97,8,100,65,"logout"],[97,14,100,71],[98,8,100,73,"isLoading"],[99,6,100,83],[99,7,100,85],[100,6,100,85,"children"],[100,14,100,85],[100,16,101,7,"children"],[101,4,101,15],[102,6,101,15,"fileName"],[102,14,101,15],[102,16,101,15,"_jsxFileName"],[102,28,101,15],[103,6,101,15,"lineNumber"],[103,16,101,15],[104,6,101,15,"columnNumber"],[104,18,101,15],[105,4,101,15],[105,11,102,26],[105,12,102,27],[106,2,104,0],[107,2,106,7],[107,11,106,16,"useAuth"],[107,18,106,23,"useAuth"],[107,19,106,23],[107,21,106,26],[108,4,107,2],[108,10,107,8,"context"],[108,17,107,15],[108,20,107,18],[108,24,107,18,"useContext"],[108,30,107,28],[108,31,107,28,"useContext"],[108,41,107,28],[108,43,107,29,"AuthContext"],[108,54,107,40],[108,55,107,41],[109,4,108,2],[109,8,108,6,"context"],[109,15,108,13],[109,20,108,18,"undefined"],[109,29,108,27],[109,31,108,29],[110,6,109,4],[110,12,109,10],[110,16,109,14,"Error"],[110,21,109,19],[110,22,109,20],[110,67,109,65],[110,68,109,66],[111,4,110,2],[112,4,111,2],[112,11,111,9,"context"],[112,18,111,16],[113,2,112,0],[114,0,112,1],[114,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OCyB;YCK;GDE;yBEE;GFc;gBGE;GHiB;mBIE;GJoB;iBKE;GLK;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}